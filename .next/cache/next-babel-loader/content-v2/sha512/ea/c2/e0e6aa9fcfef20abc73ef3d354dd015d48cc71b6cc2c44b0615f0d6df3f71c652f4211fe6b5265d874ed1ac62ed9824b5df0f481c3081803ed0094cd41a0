{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Title from './Title.js';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport { useRouter } from 'next/router';\nimport AddIcon from '@material-ui/icons/Add';\nimport { createMuiTheme } from '@material-ui/core/styles';\nimport { ThemeProvider } from '@material-ui/styles';\nimport Project from '../ethereum/project.js';\nimport web3 from '../ethereum/web3.js';\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: '#3f51b5'\n    },\n    secondary: {\n      main: '#00e676'\n    }\n  }\n});\n\nfunction preventDefault(event) {\n  event.preventDefault();\n}\n\nconst useStyles = makeStyles(theme => ({\n  seeMore: {\n    marginTop: theme.spacing(3)\n  }\n}));\nexport default function Requests({\n  usrAddress,\n  usrRequests,\n  usrReqCount,\n  usrApprovalCount\n}) {\n  const router = useRouter();\n  const classes = useStyles();\n  var date = new Date();\n  var curDate = date.getMonth() + 1 + '-' + date.getDate() + '-' + date.getFullYear();\n  console.log(usrAddress);\n\n  const onSubmit = async () => {\n    router.push(`/projects/${usrAddress}/createRequest`);\n    console.log(usrAddress);\n  };\n\n  const onApprove = async index => {\n    const project = Project(usrAddress);\n    const accounts = await web3.eth.getAccounts();\n    await project.methods.approveRequest(index).send({\n      from: accounts[0]\n    });\n  };\n\n  const onFinalize = async index => {\n    const project = Project(usrAddress);\n    const accounts = await web3.eth.getAccounts();\n    await project.methods.finalize(index).send({\n      from: accounts[0]\n    });\n  };\n\n  return /*#__PURE__*/_jsxs(React.Fragment, {\n    children: [/*#__PURE__*/_jsx(Title, {\n      children: \"Requests\"\n    }), /*#__PURE__*/_jsxs(Table, {\n      size: \"small\",\n      children: [/*#__PURE__*/_jsx(TableHead, {\n        children: /*#__PURE__*/_jsxs(TableRow, {\n          children: [/*#__PURE__*/_jsx(TableCell, {\n            children: \"Date\"\n          }), /*#__PURE__*/_jsx(TableCell, {\n            children: \"Description\"\n          }), /*#__PURE__*/_jsx(TableCell, {\n            children: \"Amount (wei)\"\n          }), /*#__PURE__*/_jsx(TableCell, {\n            children: \"Recipient\"\n          }), /*#__PURE__*/_jsx(TableCell, {\n            children: \"Approvals\"\n          }), /*#__PURE__*/_jsx(TableCell, {\n            children: \"Approve\"\n          }), /*#__PURE__*/_jsx(TableCell, {\n            children: \"Complete\"\n          })]\n        })\n      }), /*#__PURE__*/_jsx(TableBody, {\n        children: usrRequests.map((request, index) =>\n        /*#__PURE__*/\n        //requests.map\n        _jsxs(TableRow, {\n          children: [/*#__PURE__*/_jsx(TableCell, {\n            children: curDate\n          }), /*#__PURE__*/_jsx(TableCell, {\n            children: request.desc\n          }), /*#__PURE__*/_jsx(TableCell, {\n            children: request.val\n          }), /*#__PURE__*/_jsx(TableCell, {\n            children: request.receiver\n          }), /*#__PURE__*/_jsxs(TableCell, {\n            children: [request.donorApprCnt, \" / \", usrApprovalCount]\n          }), /*#__PURE__*/_jsx(TableCell, {\n            children: /*#__PURE__*/_jsx(ThemeProvider, {\n              theme: theme,\n              children: /*#__PURE__*/_jsx(Button, {\n                variant: \"contained\",\n                align: \"center\",\n                color: \"secondary\",\n                onClick: () => onApprove(index),\n                children: \"Approve\"\n              })\n            })\n          }), /*#__PURE__*/_jsx(TableCell, {\n            children: /*#__PURE__*/_jsx(ThemeProvider, {\n              theme: theme,\n              children: /*#__PURE__*/_jsx(Button, {\n                variant: \"contained\",\n                align: \"center\",\n                color: \"primary\",\n                onClick: () => onFinalize(index),\n                children: \"Complete\"\n              })\n            })\n          })]\n        }, index))\n      })]\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: classes.seeMore\n    }), /*#__PURE__*/_jsx(Grid, {\n      container: true,\n      justify: \"center\",\n      children: /*#__PURE__*/_jsxs(Button, {\n        onClick: onSubmit,\n        variant: \"contained\",\n        align: \"center\",\n        color: \"primary\",\n        children: [\"Create New Request\", /*#__PURE__*/_jsx(AddIcon, {})]\n      })\n    })]\n  });\n}","map":null,"metadata":{},"sourceType":"module"}