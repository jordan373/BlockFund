{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/Users/jordan/BlockFund/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/jordan/BlockFund/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/Users/jordan/BlockFund/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/jordan/BlockFund/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/Users/jordan/BlockFund/components/makeDonation.js\",\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport FormControl from '@material-ui/core/FormControl';\nimport Button from '@material-ui/core/Button';\nimport { Box } from '@material-ui/core';\nimport web3 from '../ethereum/web3.js';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { green } from '@material-ui/core/colors';\nimport { useRouter } from 'next/router';\nimport Project from '../ethereum/project.js';\nimport Backdrop from '@material-ui/core/Backdrop';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      display: 'flex',\n      flexWrap: 'wrap'\n    },\n    margin: {\n      margin: theme.spacing(1)\n    },\n    withoutLabel: {\n      marginTop: theme.spacing(3)\n    },\n    textField: {\n      width: '25ch'\n    },\n    buttonSuccess: {\n      backgroundColor: green[500],\n      '&:hover': {\n        backgroundColor: green[700]\n      }\n    },\n    fabProgress: {\n      color: green[500],\n      position: 'absolute',\n      top: -6,\n      left: -6,\n      zIndex: 1\n    },\n    buttonProgress: {\n      color: green[500],\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      marginTop: -12,\n      marginLeft: -12\n    },\n    backdrop: {\n      zIndex: theme.zIndex.drawer + 1,\n      color: '#fff'\n    }\n  };\n});\nexport default function MakeDonation(_ref) {\n  _s();\n\n  var address = _ref.address;\n  var router = useRouter();\n  var classes = useStyles();\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      loading = _React$useState2[0],\n      setLoading = _React$useState2[1];\n\n  var _React$useState3 = React.useState(false),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      success = _React$useState4[0],\n      setSuccess = _React$useState4[1];\n\n  var _React$useState5 = React.useState(false),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      open = _React$useState6[0],\n      setOpen = _React$useState6[1];\n\n  var timer = React.useRef();\n  var buttonClassname = clsx(_defineProperty({}, classes.buttonSuccess, success));\n  React.useEffect(function () {\n    return function () {\n      clearTimeout(timer.current);\n    };\n  }, []);\n\n  var _React$useState7 = React.useState({\n    amount: ''\n  }),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      values = _React$useState8[0],\n      setValues = _React$useState8[1];\n\n  var handleChange = function handleChange(prop) {\n    return function (event) {\n      setValues(_objectSpread(_objectSpread({}, values), {}, _defineProperty({}, prop, event.target.value)));\n    };\n  };\n\n  var onSubmit = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var project, accounts;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setSuccess(false);\n              setLoading(true);\n              console.log(values.amount);\n              project = Project(address); //const accounts;\n\n              _context.prev = 4;\n              setOpen(true);\n              _context.next = 8;\n              return web3.eth.getAccounts();\n\n            case 8:\n              accounts = _context.sent;\n              _context.next = 11;\n              return project.methods.donate().send({\n                from: accounts[0],\n                value: values.amount\n              });\n\n            case 11:\n              setSuccess(true);\n              setLoading(false);\n              setOpen(false);\n              router.push(\"/projects/\".concat(address, \"/dashboard\"));\n              _context.next = 23;\n              break;\n\n            case 17:\n              _context.prev = 17;\n              _context.t0 = _context[\"catch\"](4);\n              setSuccess(false);\n              setLoading(false);\n              setOpen(false);\n              console.log(\"Error: \" + _context.t0.message);\n\n            case 23:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[4, 17]]);\n    }));\n\n    return function onSubmit() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.root,\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      textAlign: \"center\",\n      m: 4,\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        onClick: onSubmit,\n        variant: \"contained\",\n        align: \"center\",\n        className: buttonClassname,\n        color: \"primary\",\n        disabled: loading,\n        children: \"Fund This Project\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Backdrop, {\n        className: classes.backdrop,\n        open: open,\n        children: /*#__PURE__*/_jsxDEV(CircularProgress, {\n          color: \"inherit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n        fullWidth: true,\n        className: classes.margin,\n        variant: \"outlined\",\n        children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n          htmlFor: \"outlined-adornment-amount\",\n          children: \"Donation amount\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(OutlinedInput, {\n          id: \"outlined-adornment-amount\",\n          value: values.amount,\n          onChange: handleChange('amount'),\n          startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n            position: \"start\",\n            children: \"WEI\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 29\n          }, this),\n          labelWidth: 125\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 5\n  }, this);\n}\n\n_s(MakeDonation, \"/G3lg/cA2WtQPmj9K+VxAApAZ1U=\", false, function () {\n  return [useRouter, useStyles];\n});\n\n_c = MakeDonation;\n;\n\nvar _c;\n\n$RefreshReg$(_c, \"MakeDonation\");","map":{"version":3,"sources":["/Users/jordan/BlockFund/components/makeDonation.js"],"names":["React","clsx","makeStyles","OutlinedInput","InputLabel","InputAdornment","FormControl","Button","Box","web3","CircularProgress","green","useRouter","Project","Backdrop","useStyles","theme","root","display","flexWrap","margin","spacing","withoutLabel","marginTop","textField","width","buttonSuccess","backgroundColor","fabProgress","color","position","top","left","zIndex","buttonProgress","marginLeft","backdrop","drawer","MakeDonation","address","router","classes","useState","loading","setLoading","success","setSuccess","open","setOpen","timer","useRef","buttonClassname","useEffect","clearTimeout","current","amount","values","setValues","handleChange","prop","event","target","value","onSubmit","console","log","project","eth","getAccounts","accounts","methods","donate","send","from","push","message"],"mappings":"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","sourcesContent":["import React from 'react';\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport FormControl from '@material-ui/core/FormControl';\nimport Button from '@material-ui/core/Button'\nimport { Box } from '@material-ui/core';\nimport web3 from '../ethereum/web3.js';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { green } from '@material-ui/core/colors';\nimport { useRouter } from 'next/router'\nimport Project from '../ethereum/project.js'\nimport Backdrop from '@material-ui/core/Backdrop';\n\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n      display: 'flex',\n      flexWrap: 'wrap',\n    },\n    margin: {\n      margin: theme.spacing(1),\n    },\n    withoutLabel: {\n      marginTop: theme.spacing(3),\n    },\n    textField: {\n      width: '25ch',\n    },\n    buttonSuccess: {\n      backgroundColor: green[500],\n      '&:hover': {\n        backgroundColor: green[700],\n      },\n    },\n    fabProgress: {\n      color: green[500],\n      position: 'absolute',\n      top: -6,\n      left: -6,\n      zIndex: 1,\n    },\n    buttonProgress: {\n      color: green[500],\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      marginTop: -12,\n      marginLeft: -12,\n    },\n    backdrop: {\n        zIndex: theme.zIndex.drawer + 1,\n        color: '#fff',\n      },\n}));\n\nexport default function MakeDonation({ address }) {\n    const router = useRouter();\n    const classes = useStyles();\n    const [loading, setLoading] = React.useState(false);\n    const [success, setSuccess] = React.useState(false);\n    const [open, setOpen] = React.useState(false);\n    const timer = React.useRef();\n    const buttonClassname = clsx({\n      [classes.buttonSuccess]: success,\n    });\n\n    React.useEffect(() => {\n      return () => {\n        clearTimeout(timer.current);\n      };\n    }, []);\n  \n    const [values, setValues] = React.useState({\n      amount: '',\n    });\n\nconst handleChange = (prop) => (event) => {\n    setValues({ ...values, [prop]: event.target.value });\n};\n\nconst onSubmit = async () => {\n    setSuccess(false);\n    setLoading(true);\n    console.log(values.amount);\n\n    const project = Project(address);\n    //const accounts;\n    try {\n      setOpen(true);\n      const accounts = await web3.eth.getAccounts();\n      await project.methods.donate().send({\n        from: accounts[0],\n        value: values.amount\n      });\n      \n    setSuccess(true);\n    setLoading(false);\n    setOpen(false);\n\n    router.push(`/projects/${address}/dashboard`);\n\n    } catch(err) {\n      setSuccess(false);\n      setLoading(false);\n      setOpen(false);\n      console.log(\"Error: \" + err.message);\n    }\n    \n    // await instance.methods.createProject(values.amount) .send({\n    //   from: accounts[0]\n    // })\n}\n\nreturn (\n    <div className={classes.root}>\n        <Box textAlign='center' m={4}>\n          \n          <Button onClick={onSubmit} variant=\"contained\" align=\"center\" className={buttonClassname} color=\"primary\" disabled={loading}>\n            Fund This Project\n          </Button>\n          <Backdrop className={classes.backdrop} open={open}>\n            <CircularProgress color=\"inherit\" />\n          </Backdrop>\n          \n          <FormControl fullWidth className={classes.margin} variant=\"outlined\">\n          <InputLabel htmlFor=\"outlined-adornment-amount\">Donation amount</InputLabel>\n          <OutlinedInput\n            id=\"outlined-adornment-amount\"\n            value={values.amount}\n            onChange={handleChange('amount')}\n            startAdornment={<InputAdornment position=\"start\">WEI</InputAdornment>}\n            labelWidth={125}\n          />\n        </FormControl>\n          </Box>\n        \n    </div>\n)\n\n};"]},"metadata":{},"sourceType":"module"}