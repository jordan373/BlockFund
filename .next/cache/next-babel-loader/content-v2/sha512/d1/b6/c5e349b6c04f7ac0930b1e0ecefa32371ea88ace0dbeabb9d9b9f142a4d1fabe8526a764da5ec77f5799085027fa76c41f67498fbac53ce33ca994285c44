{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"/Users/jordan/BlockFund/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/jordan/BlockFund/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Title from './Title.js';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport { useRouter } from 'next/router';\nimport AddIcon from '@material-ui/icons/Add';\nimport { createMuiTheme } from '@material-ui/core/styles';\nimport { ThemeProvider } from '@material-ui/styles';\nimport Project from '../ethereum/project.js';\nimport web3 from '../ethereum/web3.js';\nvar theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: '#3f51b5'\n    },\n    secondary: {\n      main: '#00e676'\n    }\n  }\n});\n\nfunction preventDefault(event) {\n  event.preventDefault();\n}\n\nvar useStyles = makeStyles(function (theme) {\n  return {\n    seeMore: {\n      marginTop: theme.spacing(3)\n    }\n  };\n});\nexport default function Requests(_ref) {\n  var usrAddress = _ref.usrAddress,\n      usrRequests = _ref.usrRequests,\n      usrReqCount = _ref.usrReqCount,\n      usrApprovalCount = _ref.usrApprovalCount;\n  var router = useRouter();\n  var classes = useStyles();\n  var date = new Date();\n  var curDate = date.getMonth() + 1 + '-' + date.getDate() + '-' + date.getFullYear();\n  console.log(usrAddress);\n\n  var onSubmit = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              router.push(\"/projects/\".concat(usrAddress, \"/createRequest\"));\n              console.log(usrAddress);\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onSubmit() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var onApprove = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(index) {\n      var project, accounts;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              project = Project(usrAddress);\n              _context2.next = 3;\n              return web3.eth.getAccounts();\n\n            case 3:\n              accounts = _context2.sent;\n              _context2.next = 6;\n              return project.methods.approveRequest(index).send({\n                from: accounts[0]\n              });\n\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function onApprove(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var onFinalize = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(index) {\n      var project, accounts;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              project = Project(usrAddress);\n              _context3.next = 3;\n              return web3.eth.getAccounts();\n\n            case 3:\n              accounts = _context3.sent;\n              _context3.next = 6;\n              return project.methods.finalize(index).send({\n                from: accounts[0]\n              });\n\n            case 6:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function onFinalize(_x2) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxs(React.Fragment, {\n    children: [/*#__PURE__*/_jsx(Title, {\n      children: \"Requests\"\n    }), /*#__PURE__*/_jsxs(Table, {\n      size: \"small\",\n      children: [/*#__PURE__*/_jsx(TableHead, {\n        children: /*#__PURE__*/_jsxs(TableRow, {\n          children: [/*#__PURE__*/_jsx(TableCell, {\n            children: \"Date\"\n          }), /*#__PURE__*/_jsx(TableCell, {\n            children: \"Description\"\n          }), /*#__PURE__*/_jsx(TableCell, {\n            children: \"Amount (wei)\"\n          }), /*#__PURE__*/_jsx(TableCell, {\n            children: \"Recipient\"\n          }), /*#__PURE__*/_jsx(TableCell, {\n            children: \"Approvals\"\n          }), /*#__PURE__*/_jsx(TableCell, {\n            children: \"Approve\"\n          }), /*#__PURE__*/_jsx(TableCell, {\n            children: \"Complete\"\n          })]\n        })\n      }), /*#__PURE__*/_jsx(TableBody, {\n        children: usrRequests.map(function (request, index) {\n          return (\n            /*#__PURE__*/\n            //requests.map\n            _jsxs(TableRow, {\n              children: [/*#__PURE__*/_jsx(TableCell, {\n                children: curDate\n              }), /*#__PURE__*/_jsx(TableCell, {\n                children: request.desc\n              }), /*#__PURE__*/_jsx(TableCell, {\n                children: request.val\n              }), /*#__PURE__*/_jsx(TableCell, {\n                children: request.receiver\n              }), /*#__PURE__*/_jsxs(TableCell, {\n                children: [request.donorApprCnt, \" / \", usrApprovalCount]\n              }), /*#__PURE__*/_jsx(TableCell, {\n                children: /*#__PURE__*/_jsx(ThemeProvider, {\n                  theme: theme,\n                  children: /*#__PURE__*/_jsx(Button, {\n                    variant: \"contained\",\n                    align: \"center\",\n                    color: \"secondary\",\n                    onClick: function onClick() {\n                      return onApprove(index);\n                    },\n                    children: \"Approve\"\n                  })\n                })\n              }), /*#__PURE__*/_jsx(TableCell, {\n                children: /*#__PURE__*/_jsx(ThemeProvider, {\n                  theme: theme,\n                  children: /*#__PURE__*/_jsx(Button, {\n                    variant: \"contained\",\n                    align: \"center\",\n                    color: \"primary\",\n                    onClick: function onClick() {\n                      return onFinalize(index);\n                    },\n                    children: \"Complete\"\n                  })\n                })\n              })]\n            }, index)\n          );\n        })\n      })]\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: classes.seeMore\n    }), /*#__PURE__*/_jsx(Grid, {\n      container: true,\n      justify: \"center\",\n      children: /*#__PURE__*/_jsxs(Button, {\n        onClick: onSubmit,\n        variant: \"contained\",\n        align: \"center\",\n        color: \"primary\",\n        children: [\"Create New Request\", /*#__PURE__*/_jsx(AddIcon, {})]\n      })\n    })]\n  });\n}","map":null,"metadata":{},"sourceType":"module"}